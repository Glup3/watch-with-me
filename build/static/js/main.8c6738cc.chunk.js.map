{"version":3,"sources":["components/chat/Message.js","components/chat/MessageList.js","components/chat/SendMessageForm.js","components/chat/users/User.js","components/chat/users/UserList.js","components/chat/ChatLayout.js","components/VideoScreen.js","components/NewRoomScreen.js","App.js","serviceWorker.js","index.js","Constants.js"],"names":["Message","_ref","username","text","react_default","a","createElement","className","MessageList","node","ReactDOM","findDOMNode","this","shouldScrollToBottom","scrollTop","clientHeight","scrollHeight","props","messages","map","message","index","chat_Message","key","Component","SendMessageForm","state","handleChange","e","_this","setState","Object","defineProperty","target","id","value","handleSubmit","preventDefault","sendMessage","onSubmit","lib","s","placeholder","onChange","User","UserList","users","user","users_User","ChatLayout","_Component","_getPrototypeOf2","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","sendMassage","socket","emit","SEND_MESSAGE","inherits","createClass","header","icon","users_UserList","room","chat_MessageList","chat_SendMessageForm","io","require","socketUrl","opts","height","width","playerVars","controls","rel","modestbranding","autoplay","VideoScreen","player","videoUrl","onSocketMethods","on","JOIN_ROOM","ASK_FOR_VIDEO_INFORMATION","console","log","PLAY","playVideo","PAUSE","pauseVideo","SYNC_TIME","currentTime","syncTime","NEW_VIDEO","loadVideoById","videoId","getYoutubeIdByUrl","data","url","getVideoUrl","getCurrentTime","SYNC_VIDEO_INFORMATION","startSeconds","RECEIVED_MESSAGE","toConsumableArray","ASK_FOR_USERNAME","SEND_USERNAME","seekTo","undefined","replace","split","onReady","onStateChanged","getPlayerState","Row_default","Col_default","xl","YouTube","onStateChange","chat_ChatLayout","type","NewRoomScreen","handleRoomNameClick","createRandomRoomName","possible","i","charAt","Math","floor","random","label","required","onClick","App","currentScreen","screen","components_NewRoomScreen","components_VideoScreen","Boolean","window","location","hostname","match","config","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports","ASK_FOR_VIDEO_URL"],"mappings":"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","file":"static/js/main.8c6738cc.chunk.js","sourcesContent":["import React from 'react';\n\nconst Message = ({ username, text }) => {\n  return (\n    <div className=\"message-container\">\n      <span className=\"blue-text\">{ username }</span>\n      <span className=\"white-text\">{ text }</span>\n    </div>\n  );\n}\n\nexport default Message","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Message from './Message';\n\nclass MessageList extends Component {\n\n  componentWillUpdate() {\n    const node = ReactDOM.findDOMNode(this);\n    this.shouldScrollToBottom = node.scrollTop + node.clientHeight + 100 >= node.scrollHeight;\n  }\n\n  componentDidUpdate() {\n    if (this.shouldScrollToBottom) {\n      const node = ReactDOM.findDOMNode(this);\n      node.scrollTop = node.scrollHeight;\n    }\n  }\n\n  render () {\n    return (\n      <div className=\"chat-container\">\n        {this.props.messages.map((message, index) => {\n          return (\n            <Message key={index} username={message.username} text={message.text}/>\n          )\n        })}\n      </div>\n    );\n  }\n}\n\nexport default MessageList","import React, { Component } from 'react';\nimport { Input } from 'react-materialize'\n\nclass SendMessageForm extends Component {\n\n  state = {\n    message: ''\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.sendMessage(this.state.message);\n    this.setState({\n      message: ''\n    });\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Input s={12} className=\"white-text\" placeholder=\"Type your message\" id=\"message\" onChange={this.handleChange} value={this.state.message} />\n      </form>\n    )\n  }\n}\n\nexport default SendMessageForm\n","import React from 'react';\n\nconst User = ({ username }) => {\n  return (\n    <div>\n      <div className=\"blue-text\">{ username }</div>\n    </div>\n  );\n}\n\nexport default User","import React from 'react'\nimport User from './User';\n\nconst UserList = ({ users }) => {\n  return (\n    <div className=\"user-list\">\n      {users.map((user, index) => {\n        return (\n          <User key={index} username={user} />\n        )\n      })}\n    </div>\n  )\n}\n\nexport default UserList","import React, { Component } from 'react';\nimport MessageList from './MessageList';\nimport SendMessageForm from './SendMessageForm';\nimport { SEND_MESSAGE } from '../../Constants';\nimport { Col, Row, Collapsible, CollapsibleItem } from 'react-materialize';\nimport UserList from './users/UserList';\n\nexport class ChatLayout extends Component {\n\n  sendMassage = (message) => {\n    this.props.socket.emit(SEND_MESSAGE, {\n      username: this.props.username,\n      text: message\n    });\n  }\n\n  render() {\n    return (\n      <Collapsible>\n        <CollapsibleItem header={\"Online Users: \" + this.props.users.length} icon=\"contacts\" className=\"white-text\">\n          <UserList users={this.props.users}/>\n        </CollapsibleItem>\n        <CollapsibleItem header=\"Chat\" icon=\"chat_bubble\" className=\"white-text\">\n          <div>Your username: {this.props.username}</div>\n          <div>Your room: {this.props.room}</div>\n          <p></p>\n          <Row>\n            <Col s={12}>\n              <MessageList messages={this.props.messages}/>\n            </Col>\n              <SendMessageForm className=\"myInput\" sendMessage={this.sendMassage}/> \n          </Row>\n        </CollapsibleItem>\n      </Collapsible>\n    )\n  }\n}\n\nexport default ChatLayout","import React, { Component } from 'react';\nimport YouTube from 'react-youtube';\nimport { PLAY, PAUSE, SYNC_TIME, NEW_VIDEO, ASK_FOR_VIDEO_INFORMATION,\n   SYNC_VIDEO_INFORMATION, JOIN_ROOM, RECEIVED_MESSAGE,\n   ASK_FOR_USERNAME, SEND_USERNAME } from '../Constants'\nimport { Button, Input } from 'react-materialize';\nimport ChatLayout from './chat/ChatLayout';\nimport Row from 'react-materialize/lib/Row';\nimport Col from 'react-materialize/lib/Col';\n\nvar io = require('socket.io-client');\nconst socketUrl = \"/\";\n\nconst opts = {\n  height: '390',\n  width: '640',\n  playerVars: { // https://developers.google.com/youtube/player_parameters\n    controls: 2,\n    rel: 0,\n    modestbranding: 1,\n    autoplay: 1,\n  }\n}\n\nexport class VideoScreen extends Component {\n\n  state = {\n    socket: null,\n    player: null,\n    videoUrl: '',\n    messages: [],\n    users: []\n  }\n\n  onSocketMethods = (socket) => {\n    socket.on('connect', () => {\n      socket.emit(JOIN_ROOM, {\n        room: this.props.room,\n        username: this.props.username,\n      });\n      socket.emit(ASK_FOR_VIDEO_INFORMATION);\n    });\n\n    socket.on('disconnect', () => {\n      console.log(\"Disconnected\");\n    });\n\n    socket.on(PLAY, () => {\n      this.state.player.playVideo();\n    });\n\n    socket.on(PAUSE, () => {\n      this.state.player.pauseVideo();\n    });\n\n    socket.on(SYNC_TIME, (currentTime) => {\n      this.syncTime(currentTime);\n    })\n\n    socket.on(NEW_VIDEO, (videoUrl) => {\n      this.state.player.loadVideoById({\n        videoId: this.getYoutubeIdByUrl(videoUrl)\n      });\n      this.setState({\n        videoUrl: ''\n      });\n    });\n\n    socket.on(ASK_FOR_VIDEO_INFORMATION, () => {\n      const data = {\n        url: this.state.player.getVideoUrl(),\n        currentTime: this.state.player.getCurrentTime()\n      }\n      socket.emit(SYNC_VIDEO_INFORMATION, data);\n    });\n\n    socket.on(SYNC_VIDEO_INFORMATION, (data) => {\n      const videoId = this.getYoutubeIdByUrl(data.url)\n      this.state.player.loadVideoById({\n        videoId: videoId,\n        startSeconds: data.currentTime\n      });\n    });\n\n    socket.on(RECEIVED_MESSAGE, (data) => {\n      this.setState({\n        messages: [...this.state.messages, {\n          username: data.username,\n          text: data.text\n        }]\n      });\n    });\n\n    socket.on(ASK_FOR_USERNAME, () => {\n      this.setState({users: []})\n      this.state.socket.emit(SEND_USERNAME, this.props.username);\n    });\n\n    socket.on(SEND_USERNAME, (username) => {\n\n      this.setState({\n        users: [...this.state.users, username]\n      });\n    });\n\n  }\n\n  syncTime = (currentTime) => {\n    if (this.state.player.getCurrentTime() < currentTime - 0.5 || this.state.player.getCurrentTime() > currentTime + 0.5) {\n      this.state.player.seekTo(currentTime);\n      this.state.player.playVideo();\n    }\n  }\n\n  getYoutubeIdByUrl = (url) => {\n    var ID = '';\n    \n    url = url.replace(/(>|<)/gi,'').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n\n    if(url[2] !== undefined) {\n      ID = url[2].split(/[^0-9a-z_-]/i);\n      ID = ID[0];\n    }\n    else {\n      ID = url;\n    }\n    return ID;\n  }\n\n  onReady = (e) => {\n    this.setState({\n      player: e.target\n    });\n\n    // Socket\n    const socket = io(socketUrl);\n    this.setState({socket});\n    this.onSocketMethods(socket);\n  }\n\n  onStateChanged = (e) => {\n    switch (this.state.player.getPlayerState()) {\n      case -1:\n        this.state.socket.emit(PLAY);\n        break;\n      case 0:\n        break;\n      case 1:\n        this.state.socket.emit(SYNC_TIME, this.state.player.getCurrentTime());\n        this.state.socket.emit(PLAY);\n        break;\n      case 2:\n        this.state.socket.emit(PAUSE);\n        break;\n      case 3:\n        this.state.socket.emit(SYNC_TIME, this.state.player.getCurrentTime());\n        break;\n      case 5:\n        break;\n      default:\n        break;\n    }\n  }\n\n  \n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.state.socket.emit(NEW_VIDEO, this.state.videoUrl);\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n          <Col s={12} xl={9}>\n            <div className=\"responsive-video\">\n              <YouTube \n                //videoId=\"rTs4ZpM3xWs\"\n                videoId=\"RsGDjyWHBA0\"\n                opts={opts}\n                onReady={this.onReady}\n                onStateChange={this.onStateChanged}\n                className=\"yt\"\n              />\n            </div>\n          </Col>\n          <Col s={12} xl={3}>\n            <ChatLayout \n              username={this.props.username} \n              room={this.props.room} \n              messages={this.state.messages}\n              users={this.state.users}\n              socket={this.state.socket} />\n          </Col>\n        </Row>\n        \n        <Row>\n          <form onSubmit={this.handleSubmit}>\n            <Input s={12} className=\"white-text\" type=\"text\" placeholder=\"Insert Youtube link\" id=\"videoUrl\" value={this.state.videoUrl} onChange={this.handleChange} />\n            <Col>\n              <Button s={12} type=\"submit\" className=\"black\">Load new Video</Button>\n            </Col>\n          </form>\n        </Row>\n      </div>\n    )\n  }\n}\n\nexport default VideoScreen\n","import React, { Component } from 'react';\nimport { Row, Input, Button, Col } from 'react-materialize';\n\nclass NewRoomScreen extends Component {\n\n  state = {\n    room: '',\n    username: '',\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      [e.target.id] : e.target.value\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.username, this.state.room);\n  }\n\n  handleRoomNameClick = (e) => {\n    this.setState({\n      room: this.createRandomRoomName()\n    })\n  }\n\n  createRandomRoomName = () => {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 16; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n  }\n\n  render() {\n    return (\n      <Row>\n        <h2 className=\"white-text\">Create or join a room</h2>\n        <form onSubmit={this.handleSubmit}>\n          <Input className=\"white-text\" placeholder=\"\" s={12} label=\"Your username\" value={this.state.username} required onChange={this.handleChange} id=\"username\"/>\n          <Input className=\"white-text\" placeholder=\"\" s={12} label=\"Room ID\" required value={this.state.room} onChange={this.handleChange} id=\"room\"/>\n          <Col>\n            <Button className=\"black\">Submit</Button>\n          </Col>\n        </form>\n        <Button className=\"black\" onClick={this.handleRoomNameClick}>Random room name</Button>\n      </Row>\n    )\n  }\n}\n\nexport default NewRoomScreen\n","import React, { Component } from 'react';\nimport VideoScreen from './components/VideoScreen';\nimport NewRoomScreen from './components/NewRoomScreen';\nimport { Container } from 'react-materialize';\n\nclass App extends Component {\n\n  state = {\n    username: '',\n    room: '',\n    currentScreen: 'default',\n  }\n\n  onSubmit = (username, room) => {\n    this.setState({\n      username,\n      room,\n      currentScreen: 'VideoScreen'\n    })\n  }\n\n  render() {\n    var screen;\n    if (this.state.currentScreen === 'default') {\n      screen = <NewRoomScreen onSubmit={this.onSubmit}/>\n    }\n    if (this.state.currentScreen === 'VideoScreen') {\n      screen = <VideoScreen room={this.state.room} username={this.state.username}/>\n    }\n\n    return (\n      <Container >\n        {screen}\n      </Container>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'react-materialize';\nrequire('dotenv').config();\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  SYNC_TIME: 'SYNC_TIME',\n  NEW_VIDEO: 'NEW_VIDEO',\n  ASK_FOR_VIDEO_URL: 'ASK_FOR_VIDEO_URL',\n  SYNC_VIDEO_INFORMATION: 'SYNC_VIDEO_INFORMATION',\n  ASK_FOR_VIDEO_INFORMATION: 'ASK_FOR_VIDEO_INFORMATION',\n  JOIN_ROOM: 'JOIN_ROOM',\n  SEND_MESSAGE: 'SEND_MESSAGE',\n  RECEIVED_MESSAGE: 'RECEIVED_MESSAGE',\n  ASK_FOR_USERNAME: 'ASK_FOR_USERNAME',\n  SEND_USERNAME: 'SEND_USERNAME'\n}"],"sourceRoot":""}