(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t){e.exports={PLAY:"PLAY",PAUSE:"PAUSE",SYNC_TIME:"SYNC_TIME",NEW_VIDEO:"NEW_VIDEO",ASK_FOR_VIDEO_URL:"ASK_FOR_VIDEO_URL",SYNC_VIDEO_INFORMATION:"SYNC_VIDEO_INFORMATION",ASK_FOR_VIDEO_INFORMATION:"ASK_FOR_VIDEO_INFORMATION",JOIN_ROOM:"JOIN_ROOM"}},38:function(e,t,n){e.exports=n(87)},43:function(e,t,n){},84:function(e,t){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(33),i=n.n(r),c=(n(43),n(5)),s=n(6),u=n(8),l=n(7),m=n(9),d=n(34),h=n(1),O=n(58),p="/",y={height:"390",width:"640",playerVars:{controls:2,rel:0,modestbranding:1,autoplay:1}},S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",room:"",socket:null,player:null,videoUrl:"https://www.youtube.com/watch?v=RsGDjyWHBA0"},n.initSocket=function(e){e.on("connect",function(){e.emit(h.JOIN_ROOM,n.state.room),e.emit(h.ASK_FOR_VIDEO_INFORMATION)}),e.on("disconnect",function(){console.log("Disconnected")}),e.on(h.PLAY,function(){n.state.player.playVideo()}),e.on(h.PAUSE,function(){n.state.player.pauseVideo()}),e.on(h.SYNC_TIME,function(e){n.syncTime(e)}),e.on(h.NEW_VIDEO,function(e){n.state.player.loadVideoById({videoId:n.getYoutubeIdByUrl(e)}),n.setState({videoUrl:""})}),e.on(h.ASK_FOR_VIDEO_INFORMATION,function(){var t={url:n.state.player.getVideoUrl(),currentTime:n.state.player.getCurrentTime()};e.emit(h.SYNC_VIDEO_INFORMATION,t)}),e.on(h.SYNC_VIDEO_INFORMATION,function(e){var t=n.getYoutubeIdByUrl(e.url);n.state.player.loadVideoById({videoId:t,startSeconds:e.currentTime})})},n.syncTime=function(e){(n.state.player.getCurrentTime()<e-.2||n.state.player.getCurrentTime()>e+.2)&&(n.state.player.seekTo(e),n.state.player.playVideo())},n.getYoutubeIdByUrl=function(e){return void 0!==(e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e},n.onReady=function(e){n.setState({player:e.target});var t=O(p);n.setState({socket:t}),n.initSocket(t)},n.onStateChanged=function(e){switch(n.state.player.getPlayerState()){case-1:n.state.socket.emit(h.PLAY);break;case 0:break;case 1:n.state.socket.emit(h.SYNC_TIME,n.state.player.getCurrentTime()),n.state.socket.emit(h.PLAY);break;case 2:n.state.socket.emit(h.PAUSE);break;case 3:n.state.socket.emit(h.SYNC_TIME,n.state.player.getCurrentTime())}},n.handleSubmit=function(e){e.preventDefault(),n.state.socket.emit(h.NEW_VIDEO,n.state.videoUrl)},n.handleChange=function(e){n.setState({videoUrl:e.target.value})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:this.props.username,room:this.props.room})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(d.a,{videoId:"RsGDjyWHBA0",opts:y,onReady:this.onReady,onStateChange:this.onStateChanged,className:"yt"}),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"URL eingeben",value:this.state.videoUrl,onChange:this.handleChange}),o.a.createElement("button",{type:"submit"},"Load new Video")))}}]),t}(a.Component),I=n(37),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={room:"",username:""},n.handleChange=function(e){n.setState(Object(I.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.username,n.state.room)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Create or join room"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",placeholder:"roomname",id:"room",onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"text",placeholder:"username",id:"username",onChange:this.handleChange,required:!0}),o.a.createElement("button",null,"Create/Join")))}}]),t}(a.Component),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",room:"",currentScreen:"default"},n.onSubmit=function(e,t){n.setState({username:e,room:t,currentScreen:"VideoScreen"})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return"default"===this.state.currentScreen?o.a.createElement(b,{onSubmit:this.onSubmit}):"VideoScreen"===this.state.currentScreen?o.a.createElement(S,{room:this.state.room,username:this.state.username}):void 0}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,2,1]]]);
//# sourceMappingURL=main.bb30938a.chunk.js.map