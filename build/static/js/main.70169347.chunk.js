(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),o=a.n(s),c=(a(54),a(5)),l=a(6),i=a(8),u=a(7),m=a(9),h=a(19),d=a(30),E=a(46),p=a(3),S=a(4),O=function(e){var t=e.username,a=e.text;return r.a.createElement("div",{className:"message-container"},r.a.createElement("span",{className:"blue-text"},t),r.a.createElement("span",{className:"white-text"},a))},b=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillUpdate",value:function(){var e=o.a.findDOMNode(this);this.shouldScrollToBottom=e.scrollTop+e.clientHeight+100>=e.scrollHeight}},{key:"componentDidUpdate",value:function(){if(this.shouldScrollToBottom){var e=o.a.findDOMNode(this);e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){return r.a.createElement("div",{className:"chat-container"},this.props.messages.map(function(e,t){return r.a.createElement(O,{key:t,username:e.username,text:e.text})}))}}]),t}(n.Component),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.sendMessage(a.state.message),a.setState({message:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(S.Input,{s:12,className:"white-text",placeholder:"Type your message",id:"message",onChange:this.handleChange,value:this.state.message}))}}]),t}(n.Component),N=function(e){var t=e.username;return r.a.createElement("div",null,r.a.createElement("div",{className:"blue-text"},t))},g=function(e){var t=e.users;return r.a.createElement("div",{className:"user-list"},t.map(function(e,t){return r.a.createElement(N,{key:t,username:e})}))},v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sendMassage=function(e){a.props.socket.emit(p.SEND_MESSAGE,{username:a.props.username,text:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(S.Collapsible,null,r.a.createElement(S.CollapsibleItem,{header:"Online Users: "+this.props.users.length,icon:"contacts",className:"white-text"},r.a.createElement(g,{users:this.props.users})),r.a.createElement(S.CollapsibleItem,{header:"Chat",icon:"chat_bubble",className:"white-text"},r.a.createElement("div",null,"Your username: ",this.props.username),r.a.createElement("div",null,"Your room: ",this.props.room),r.a.createElement("p",null),r.a.createElement(S.Row,null,r.a.createElement(S.Col,{s:12},r.a.createElement(b,{messages:this.props.messages})),r.a.createElement(f,{className:"myInput",sendMessage:this.sendMassage}))))}}]),t}(n.Component),y=a(17),I=a.n(y),_=a(11),C=a.n(_),A=a(107),R="/",k={height:"390",width:"640",playerVars:{controls:2,rel:0,modestbranding:1,autoplay:1}},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={socket:null,player:null,videoUrl:"",messages:[],users:[]},a.onSocketMethods=function(e){e.on("connect",function(){e.emit(p.JOIN_ROOM,{room:a.props.room,username:a.props.username}),e.emit(p.ASK_FOR_VIDEO_INFORMATION)}),e.on("disconnect",function(){console.log("Disconnected")}),e.on(p.PLAY,function(){a.state.player.playVideo()}),e.on(p.PAUSE,function(){a.state.player.pauseVideo()}),e.on(p.SYNC_TIME,function(e){a.syncTime(e)}),e.on(p.NEW_VIDEO,function(e){a.state.player.loadVideoById({videoId:a.getYoutubeIdByUrl(e)}),a.setState({videoUrl:""})}),e.on(p.ASK_FOR_VIDEO_INFORMATION,function(){var t={url:a.state.player.getVideoUrl(),currentTime:a.state.player.getCurrentTime()};e.emit(p.SYNC_VIDEO_INFORMATION,t)}),e.on(p.SYNC_VIDEO_INFORMATION,function(e){var t=a.getYoutubeIdByUrl(e.url);a.state.player.loadVideoById({videoId:t,startSeconds:e.currentTime})}),e.on(p.RECEIVED_MESSAGE,function(e){a.setState({messages:[].concat(Object(d.a)(a.state.messages),[{username:e.username,text:e.text}])})}),e.on(p.ASK_FOR_USERNAME,function(){a.setState({users:[]}),a.state.socket.emit(p.SEND_USERNAME,a.props.username)}),e.on(p.SEND_USERNAME,function(e){a.setState({users:[].concat(Object(d.a)(a.state.users),[e])})})},a.syncTime=function(e){(a.state.player.getCurrentTime()<e-.5||a.state.player.getCurrentTime()>e+.5)&&(a.state.player.seekTo(e),a.state.player.playVideo())},a.getYoutubeIdByUrl=function(e){return void 0!==(e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_-]/i)[0]:e},a.onReady=function(e){a.setState({player:e.target});var t=A(R);a.setState({socket:t}),a.onSocketMethods(t)},a.onStateChanged=function(e){switch(a.state.player.getPlayerState()){case-1:a.state.socket.emit(p.PLAY);break;case 0:break;case 1:a.state.socket.emit(p.SYNC_TIME,a.state.player.getCurrentTime()),a.state.socket.emit(p.PLAY);break;case 2:a.state.socket.emit(p.PAUSE);break;case 3:a.state.socket.emit(p.SYNC_TIME,a.state.player.getCurrentTime())}},a.handleSubmit=function(e){e.preventDefault(),a.state.socket.emit(p.NEW_VIDEO,a.state.videoUrl)},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(C.a,{s:12,xl:9},r.a.createElement("div",{className:"responsive-video"},r.a.createElement(E.a,{videoId:"RsGDjyWHBA0",opts:k,onReady:this.onReady,onStateChange:this.onStateChanged,className:"yt"}))),r.a.createElement(C.a,{s:12,xl:3},r.a.createElement(v,{username:this.props.username,room:this.props.room,messages:this.state.messages,users:this.state.users,socket:this.state.socket}))),r.a.createElement(I.a,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(S.Input,{s:12,className:"white-text",type:"text",placeholder:"Insert Youtube link",id:"videoUrl",value:this.state.videoUrl,onChange:this.handleChange}),r.a.createElement(C.a,null,r.a.createElement(S.Button,{s:12,type:"submit",className:"black"},"Load new Video")))))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={room:"",username:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state.username,a.state.room)},a.handleRoomNameClick=function(e){a.setState({room:a.createRandomRoomName()})},a.createRandomRoomName=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<16;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(S.Row,null,r.a.createElement("h2",{className:"white-text"},"Create or join a room"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(S.Input,{className:"white-text",placeholder:"",s:12,label:"Your username",value:this.state.username,required:!0,onChange:this.handleChange,id:"username"}),r.a.createElement(S.Input,{className:"white-text",placeholder:"",s:12,label:"Room ID",required:!0,value:this.state.room,onChange:this.handleChange,id:"room"}),r.a.createElement(S.Col,null,r.a.createElement(S.Button,{className:"black"},"Submit"))),r.a.createElement(S.Button,{className:"black",onClick:this.handleRoomNameClick},"Random room name"))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",room:"",currentScreen:"default"},a.onSubmit=function(e,t){a.setState({username:e,room:t,currentScreen:"VideoScreen"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;return"default"===this.state.currentScreen&&(e=r.a.createElement(j,{onSubmit:this.onSubmit})),"VideoScreen"===this.state.currentScreen&&(e=r.a.createElement(M,{room:this.state.room,username:this.state.username})),r.a.createElement(S.Container,null,e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(136).config(),o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},3:function(e,t){e.exports={PLAY:"PLAY",PAUSE:"PAUSE",SYNC_TIME:"SYNC_TIME",NEW_VIDEO:"NEW_VIDEO",ASK_FOR_VIDEO_URL:"ASK_FOR_VIDEO_URL",SYNC_VIDEO_INFORMATION:"SYNC_VIDEO_INFORMATION",ASK_FOR_VIDEO_INFORMATION:"ASK_FOR_VIDEO_INFORMATION",JOIN_ROOM:"JOIN_ROOM",SEND_MESSAGE:"SEND_MESSAGE",RECEIVED_MESSAGE:"RECEIVED_MESSAGE",ASK_FOR_USERNAME:"ASK_FOR_USERNAME",SEND_USERNAME:"SEND_USERNAME"}},49:function(e,t,a){e.exports=a(139)},54:function(e,t,a){}},[[49,2,1]]]);
//# sourceMappingURL=main.70169347.chunk.js.map